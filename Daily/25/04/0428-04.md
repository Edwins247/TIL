## TIL

### 저장 장치란?
- 데이터를 보관하는 컴퓨터의 기억 창고, 컴퓨터의 데이터를 영구적으로 저장하는 공간으로 문서, 사진, 프로그램, 운영체제 등 모든 정보는 이곳에 보관됨
- 저장 장치는 기술 발전에 따라 더 빠르게, 더 작게, 더 크게 진화해왔음(흔히들 사용하는 HDD, SSD가 대표적인 저장 장차이며, USB, CD, 플로피 디스크 등의 저장장치도 존재함)
- 저장 장치의 종류
  - 플로피 디스크: 자성 디스크 기반, 초기 이동식 저장장치, 매우 느림
  - HDD: 기계식 디스크 회전 방식(자기 디스크), 느림
  - SATA SSD: 플래시 메모리 기반, 빠름
  - NVMe SSD: PCle로 연결, 최고 속도의 SSD
  - 클라우드 저장소: 인터넷 기반 원격 저장 장소, 네트워크 의존

#### HDD(Hard Disk Drive)
- 데이터를 자기 방식으로 저장하는 기계식 저장 장치(1956년 IBM에서 처음 개발된 이래로, 오랜 기간 동안 컴퓨터의 주 저장 장치로 사용되어 옴)
- 사진, 영상, 로그 파일 등 단순 대용량 데이터 저장용, 백업 서버, NAS 등 24시간 동작하는 시스템에서 자주 사용, 예산이 제한된 환경에서 저장 위주의 PC 구성 시 사용
- 현재는 운영체제/프로그램 실행은 SSD, 저장 공간 확보는 HDD로 병행 사용하는 경우가 많음
- 장점
  - 대용량 저장이 가능하며 수십 TB도 존재함
  - GB당 가격이 저렴하여 저장 비용이 효율적(가성비)
  - 서버, CCTV, NAS, 백업용 등에서 여전히 널리 사용됨
- 단점
  - 기계식 구조로 인해 충격에 약함
  - 속도가 느려서 부팅/앱 실행 시간이 김
  - SSD에 비해 소음과 발열이 큼
- 하드 디스크의 내부 구성 개요
  - 회전하는 디스크 위에서, 기계 팔(암)과 헤드가 정밀하게 움직이며 데이터를 읽고 쓰는 저장 장치
  - 좀 더 자세하게 알아보면
    - 회전하는 원형 디스크(플래터)위에 데이터를 저장
    - 읽기/쓰기 헤드가 플레터의 표면을 읽거나 쓰면서 데이터를 처리
    - 플래터는 스핀들이라는 축을 중심으로 초당 수천회(예: 7,200RPM)회전
    - 헤드는 액츄에이터 암에 의해 원하는 위치로 빠르게 이동
  - 데이터는 0과 1의 자기 방향 변화로 기록됨
- 부품별 설명 및 역할
  - 플래터
    - 데이터가 실제로 저장되는 원형 디스크
    - 자기 성질을 가진 금속 또는 유리 재질, 보통 여러 장이 수직으로 적층되어 있음(양면 사용 가능)
    - 표면은 트랙(Track)과 섹터(Sector)로 나뉨
    - 즉, HDD가 2TB 용량이면, 여러 장의 플래터에 데이터가 분산 저장됨
    - 물리구조
      - 트랙(Track)
        - 데이터는 디스크의 트랙(Track)이라는 부분에 기록됨
        - 플래터 위의 동심원
      - 섹터(Sector)
        - 트랙은 섹터라는 작은 단위들로 나뉘어져 있음
        - 자체적으로 주소를 가지고 있는 스토리지의 단위
        - 하나의 트랙에 다수의 섹터가 포함되어 있으며, 플래터에 수천개의 트랙이 있을 수 있음
  - 스핀들
    - 플래터를 고정하고 회전시키는 중심 축이자 모터
    - 하드디스크 내부에 여러 장의 플래터가 수직으로 쌓여있는데, 이 디스크를 고속으로 회전시켜주는 회전축
    - 스핀들 모터를 통해 플래터를 지속적으로 고속 회전
    - 일정한 회전 속도(rpm)을 유지해야 안정적으로 데이터를 읽고 씀
    - 리드/라이트 헤드가 정확한 위치(즉, 트랙)을 읽을 수 있도록 도움
    - 왜 중요한가?
      - 스핀들은 하드디스크의 심장과 같은 역할로
      - 플래터가 회전하지 않으면 헤드는 데이터를 읽거나 쓸 수 없음
      - 또한, 회전이 일정하지 않으면 데이터 접근 오류, 헤드 충돌, 속도 저하 등의 문제가 발생할 수 있음
    - RPM(Revolutions Per Minute)
      - 5400 RPM: 보급형 하드디스크(저소음, 저전력)
      - 7200 RPM: 일반 데스크탑용 HDD
      - 10000~15000 RPM: 서버/고성능 워크스테이션 HDD
      - 즉 속도가 빠를수록 읽기/쓰기 성능이 향상됨, 하지만 발열, 소음, 소모 전력도 함께 증가함 
  - 리드/라이트 헤드
    - HDD 내부에서 플래터 표면의 자기 신호를 읽고(read), 자기장을 변화시켜 데이터를 기록(write)하는 아주 정밀한 부품
    - 보통 플래터 1면에 하나씩 부착되어 있고, 양면 디스크는 2개의 헤드가 동시에 동작할 수 있음
    - 동작 원리
    1. 플래터가 스핀들에 의해 고속 회전함
    2. 헤드는 플래터 표면 위를 비접촉 상태로 수십 나노미터 거리에서 "떠 있음"
    3. 데이터 읽기(read) - 극성을 감지해 0과 1로 해석
    4. 데이터 쓰기(write) - 전류를 흘려 자기장을 바꿔 데이터를 기록
    - 플래터와 직접 접촉하게 되면 "헤드 크래시"가 발생하여 물리적 손상으로 이어짐
    - 충격이나 낙하 시 가장 먼저 손상되는 부품, 진공 밀폐 상태에서만 안정적으로 작동
    - 그래서 HDD는 이동 중 사용하면 위험하고, SSD보다 충격에 약한 이유 중 하나
  - 액츄에이터 암과 모터
    - 액츄에이터 암: 리드/라이트 헤드를 플래터 위에 원하는 위치로 이동시키는 정밀한 기계 팔
    - 액츄에이터 모터: 액츄에이터 암을 정확하고 빠르게 움직이게 만드는 구동 모터
    - 액츄에이터 모터가 고장나면 헤드가 전혀 이동하지 않음

#### SSD(Solid State Drive)
- SSD는 반도체 기반의 저장 장치로 움직이는 부품 없이 데이터를 전기적으로 저장하고 읽는 장치
- HDD는 데이터를 영구적으로 저장하지만, 속도, 내구성, 소음 등 모든 면에서 훨씬 우수
- SSD 내부 구조
  - NAND 플래시 메모리: 데이터를 저장하는 반도체 셀의 집합(HDD의 플래터 역할)
  - 컨트롤러: SSD의 두뇌 역할로 데이터 저장/읽기/복원/분산 등을 제어
  - DRAM 캐시(선택적): 임시 데이터 저장소로 읽기/쓰기 속도 향상에 도움
  - 인터페이스: 컴퓨터와 연결되는 방식(SATA, NVMe, PCle 등)

#### 저장 장치 vs. RAM 차이
- RAM은 작업 중 데이터를 임시 저장함 -> 가장 빠르지만 전원을 끄면 모두 사라짐
- 저장장치는 데이터를 영구 저장함 -> 속도는 느리지만 오래 보관 가능
- 속도 기준: RAM > 저장 장치
- 용량 기준: RAM < 저장 장치
- 사용 예
  - RAM: 실행 중인 프로그램, 계산의 중앙값
  - 저장장치: 게임 설치 파일, 사진, 영상 문서 보관

#### RAID(Redundant Array of Independent Disks)
- 여러 개의 하드디스크 또는 SSD를 하나로 묶어 속도를 높이거나 데이터 안정성을 향상시키는 기술
- 하나의 큰 디스크처럼 보이지만, 내부적으로 여러 개의 디스크가 동시에 협력
- RAID 등장 배경: 단일 디스크의 한계 극복이 필요했기 때문에
  - 속도가 느림 -> 디스크는 기계식 회전 장치(HDD) -> 대량의 데이터 처리에 병목 발생
  - 단일 디스크 고장 시 데이터 전부 손실 -> 수백 GB ~ TB의 데이터를 한 디스크에만 저장하면 리스크가 큼
  - 확장성 부족 -> 저장 용량을 늘리려면 더 큰 디스크를 사야 했음(비효율)
  - 즉, 여러개의 디스크를 묶어서 병렬 처리하거나, 복사본을 분산 저장하는 방법이 필요했음 -> RAID 등장
- RAID가 필요한 상황
  1. 대량의 파일을 빠르게 처리해야 할 때(영상 편집, 3D 렌더링, 대규모 데이터베이스 등, RAID 0을 활용해 속도 향상)
  2. 데이터 유실이 치명적인 상황(기업 서버, 금융 데이터, 병원 기록 등, RAID 1, RAID 5를 활용해 복구 가능성 확보)
  3. 대규모 저장소가 필요한 경우(CCTV 영상 기록, 클라우드 백업 등, 여러 디스크를 묶어 용량 확장 + 안정성 강화)
- RAID의 주요 목적
  - 성능 향상: 여러 디스크에 데이터를 나눠 쓰면 속도 증가
  - 안정성 확보: 디스크 하나가 고장나도 데이터를 복구할 수 있도록 설계
  - 확장성 제공: 큰 저장 공간을 구성 가능

#### RAID 주요 구성 방식(종류)
- RAID 0: 데이터를 분산 저장하며 속도가 빠른 장점이 있음, 하지만 데이터 복구가 불가능함(Striping, 속도 향상용)
  - 예: 1GB 데이터를 2개의 디스크에 500MB씩 나눠 기록, 최소 2개 이상의 디스크 필요
  - 장점
    1) 읽기/쓰기 속도 매우 빠름
    2) 저장 공간 손실 없음(모든 디스크의 용량을 합침)
    3) 저렴한 비용으로 성능 향상 가능
  - 단점
    1) 데이터 안정성 없음
    2) 디스크 1개라도 고장나면 전체 데이터 손실
    3) 복구 불가능, 백업 필수     
- RAID 1: 데이터를 복제 저장하며 안정성이 높은 장점이 있음, 하지만 데이터 저장 공간을 많이 사용하지 못함(Mirroring, 안정성 보장용)
  - 디스크1에 저장하면 디스크2에도 똑같이 저장, 최소 2개 디스크가 필요
  - 데이터 보호 및 복구와 하나의 디스크가 고장나도 다른 디스크로 복구가 가능한 목적으로 사용
  - 장점
    1) 높은 안정성(디스크 하나가 고장나도 운영할 수 있음)
    2) 복구가 빠르며, 실시간 미러링이 가능함
    3) 단순하고 설정이 쉬움
  - 단점
    1) 용량 낭비(50%) - 저장 용량은 반으로 줄어듦
    2) 속도 향상 없음(쓰기 속도는 더 느릴 수도 있음)
    3) 비용 증가(같은 데이터를 두 번 저장)   
- RAID 5: 데이터 + 패리티 분산 저장, 속도와 복구 관점에서 균형이 있지만 저장 공간이 더 많이 필요함(속도 + 복구 균형형)
  - 데이터를 분산 저장하면서, 복구용 패리티(parity) 정보를 추가 저장
    - Parity란? 디스크 고장 시 데이터를 복구할 수 있게 해주는 오류 검출 + 복원용 정보
    - 데이터 무결성을 확인하거나, 손실된 데이터를 복구하기 위한 수학적 정보
    - RAID 5에서는 데이터를 여러 디스크에 나눠 저장하면서, 각 블록의 값을 조합해 만든 검사 정보를 별도 디스크에 저장 
  - 패리티는 분산 저장되어 어느 디스크에든 균형있게 존재, 최소 3개 이상의 디스크 필요
  - 속도와 안정성의 균형이 필요한 경우에 사용, 하나의 디스크가 고장나도 패리티를 이용해 복구가 가능함
  - 장점
    1) 속도와 복구력의 균형
    2) 용량 손실이 적음(N-1개의 디스크 용량 사용 가능)
    3) 한 개의 디스크 고장시에도 데이터 유지
  - 단점
    1) 복구 시 시간이 오래 걸림(재패리티 생성 부담)
    2) 쓰기 작업은 패리티 계산 떄문에 느림
    3) 2개 이상의 디스크 동시 고장 시 복구 불가  
- RAID 10: RAID 0과 1의 혼합으로 속도와 안정성이 모두 높음. 하지만 더 많은 저장 공간이 필요함(성능 + 안정성 고급형)
  - RAID 1 + RAID 0의 혼합 방식
  - 데이터를 먼저 복제(RAID 1)하고, 그 복제본들을 분산(RAID 0) 저장
  - 최소 4개의 디스크 필요
  - 고속성과 고안전성을 동시에 확보하는 목적
  - 고성능 서버, 데이터베이스 등에서 많이 사용
  - 장점
    1) 읽기/쓰기 속도 매우 빠름
    2) 높은 데이터 복구력
    3) 디스크 일부 고장에도 안정적으로 복구 가능
  - 단점
    1) 용량 손실이 큼
    2) 디스크 4개 이상 필요, 비용이 부담
    3) 설정이 복잡할 수 있음

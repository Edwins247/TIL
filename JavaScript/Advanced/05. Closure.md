# JavaScript í´ë¡œì €(Closure) ì •ë¦¬

**í´ë¡œì €(Closure)** ëŠ” JavaScriptì—ì„œ ë§¤ìš° ì¤‘ìš”í•œ ê°œë…ìœ¼ë¡œ, í•¨ìˆ˜ì™€ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½(Lexical Environment) ê°„ì˜ ì¡°í•©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í´ë¡œì €ëŠ” í•¨ìˆ˜ê°€ **ìì‹ ì´ ì„ ì–¸ëœ ìŠ¤ì½”í”„ ì™¸ë¶€ì—ì„œ í˜¸ì¶œë˜ë”ë¼ë„, í•´ë‹¹ ìŠ¤ì½”í”„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥**ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ ë¬¸ì„œì—ì„œëŠ” í´ë¡œì €ì˜ ê°œë…, ë™ì‘ ë°©ì‹, ê·¸ë¦¬ê³  ë‹¤ì–‘í•œ ì˜ˆì œë¥¼ í†µí•´ í´ë¡œì €ë¥¼ ì´í•´í•˜ê³  í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## ğŸ“– í´ë¡œì €ë€?

- **í´ë¡œì €(Closure)** ëŠ” **í•¨ìˆ˜ì™€ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½(Lexical Environment)** ì˜ ì¡°í•©ì…ë‹ˆë‹¤.
- í•¨ìˆ˜ê°€ ìì‹ ì´ ì„ ì–¸ëœ ìŠ¤ì½”í”„ì—ì„œ ì™¸ë¶€ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
- í´ë¡œì €ëŠ” í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì •ì˜ëœ í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ ë•Œ ìƒì„±ë©ë‹ˆë‹¤.

---

## ğŸ“‚ í´ë¡œì €ì˜ ë™ì‘ ë°©ì‹

### **1. ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(Lexical Scope)**

- JavaScriptëŠ” **ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(Lexical Scope)** ë¥¼ ë”°ë¦…ë‹ˆë‹¤.
- í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ìœ„ì¹˜ì— ë”°ë¼ ìŠ¤ì½”í”„(ë³€ìˆ˜ ì ‘ê·¼ ë²”ìœ„)ê°€ ê²°ì •ë©ë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function outer() {
    const outerVar = "I am from outer";

    function inner() {
        console.log(outerVar); // inner í•¨ìˆ˜ëŠ” outerVarì— ì ‘ê·¼ ê°€ëŠ¥
    }

    inner();
}

outer(); // ì¶œë ¥: I am from outer
```

---

### **2. í´ë¡œì € ìƒì„±**

- í´ë¡œì €ëŠ” ë‚´ë¶€ í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ ë•Œ ìƒì„±ë©ë‹ˆë‹¤.
- ë‚´ë¶€ í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ê±°ë‚˜ ë‹¤ë¥¸ ê³³ì—ì„œ í˜¸ì¶œë˜ë”ë¼ë„, ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ëŠ” ìœ ì§€ë©ë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function createCounter() {
    let count = 0;

    return function () {
        count++;
        return count;
    };
}

const counter = createCounter();
console.log(counter()); // ì¶œë ¥: 1
console.log(counter()); // ì¶œë ¥: 2
```

#### ì„¤ëª…:
- `createCounter` í•¨ìˆ˜ëŠ” ë‚´ë¶€ì— `count` ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©°, ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- ë°˜í™˜ëœ ë‚´ë¶€ í•¨ìˆ˜ëŠ” `count` ë³€ìˆ˜ì— ê³„ì† ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ `count` ê°’ì´ ìœ ì§€ë©ë‹ˆë‹¤.

---

## ğŸ“‚ í´ë¡œì €ì˜ í™œìš© ì‚¬ë¡€

### **1. ë°ì´í„° ì€ë‹‰ (Encapsulation)**

í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë°ì´í„°ë¥¼ ì™¸ë¶€ì—ì„œ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ëª»í•˜ë„ë¡ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function createBankAccount(initialBalance) {
    let balance = initialBalance;

    return {
        deposit(amount) {
            balance += amount;
            console.log(`Deposited: ${amount}, New Balance: ${balance}`);
        },
        withdraw(amount) {
            if (amount > balance) {
                console.log("Insufficient funds");
            } else {
                balance -= amount;
                console.log(`Withdrew: ${amount}, New Balance: ${balance}`);
            }
        },
        getBalance() {
            return balance;
        },
    };
}

const account = createBankAccount(100);
account.deposit(50); // ì¶œë ¥: Deposited: 50, New Balance: 150
account.withdraw(30); // ì¶œë ¥: Withdrew: 30, New Balance: 120
console.log(account.getBalance()); // ì¶œë ¥: 120
```

#### ì„¤ëª…:
- `balance` ë³€ìˆ˜ëŠ” ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë©°, ë°˜í™˜ëœ ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì¡°ì‘ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

### **2. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬**

í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ íŠ¹ì • ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function attachEventHandlers() {
    for (let i = 0; i < 3; i++) {
        document.getElementById(`button${i}`).addEventListener("click", function () {
            console.log(`Button ${i} clicked`);
        });
    }
}
attachEventHandlers();
```

---

### **3. ì»¤ë§(Currying)**

í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶€ë¶„ì ìœ¼ë¡œ ì ìš©ëœ í•¨ìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function multiply(a) {
    return function (b) {
        return a * b;
    };
}

const double = multiply(2);
console.log(double(5)); // ì¶œë ¥: 10

const triple = multiply(3);
console.log(triple(5)); // ì¶œë ¥: 15
```

#### ì„¤ëª…:
- `multiply` í•¨ìˆ˜ëŠ” ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ `a`ë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### **4. ë°˜ë³µê¸°ì™€ ìƒíƒœ ìœ ì§€**

í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©´ì„œ ê°’ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function createIterator(array) {
    let index = 0;

    return function () {
        if (index < array.length) {
            return array[index++];
        } else {
            return null;
        }
    };
}

const iterator = createIterator([1, 2, 3]);
console.log(iterator()); // ì¶œë ¥: 1
console.log(iterator()); // ì¶œë ¥: 2
console.log(iterator()); // ì¶œë ¥: 3
console.log(iterator()); // ì¶œë ¥: null
```

#### ì„¤ëª…:
- `index` ë³€ìˆ˜ëŠ” í´ë¡œì €ë¥¼ í†µí•´ ìœ ì§€ë˜ë©°, ê° í˜¸ì¶œ ì‹œ ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

---

## ğŸ“‚ í´ë¡œì €ì˜ ì¥ì ê³¼ ë‹¨ì 

### **ì¥ì **
1. **ë°ì´í„° ì€ë‹‰**:
   - ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ë³€ìˆ˜ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤.
2. **ìƒíƒœ ìœ ì§€**:
   - í•¨ìˆ˜ í˜¸ì¶œ ê°„ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **ì¬ì‚¬ìš©ì„±**:
   - ì»¤ë§ê³¼ ê°™ì€ íŒ¨í„´ì„ í†µí•´ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **ë‹¨ì **
1. **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**:
   - í´ë¡œì €ê°€ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ëŠ” ê°€ë¹„ì§€ ì»¬ë ‰ì…˜(GC)ì˜ ëŒ€ìƒì´ ë˜ì§€ ì•Šì•„ ë©”ëª¨ë¦¬ë¥¼ ê³„ì† ì ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ë””ë²„ê¹… ì–´ë ¤ì›€**:
   - ì—¬ëŸ¬ ì¤‘ì²©ëœ ìŠ¤ì½”í”„ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë””ë²„ê¹…ì´ ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“‚ ì£¼ì˜ì‚¬í•­

### **1. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€**
í´ë¡œì €ê°€ ì°¸ì¡°í•˜ëŠ” ë³€ìˆ˜ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ ìˆì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

#### ì˜ˆì œ:
```javascript
function createClosure() {
    let largeData = new Array(1000000).fill("data");

    return function () {
        console.log("Closure created");
    };
}

const closure = createClosure();
// largeDataëŠ” ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì§€ë§Œ ë©”ëª¨ë¦¬ì— ë‚¨ì•„ ìˆì„ ìˆ˜ ìˆìŒ
```

#### í•´ê²° ë°©ë²•:
- í•„ìš”í•˜ì§€ ì•Šì€ ì°¸ì¡°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì œê±°í•©ë‹ˆë‹¤.
```javascript
function createClosure() {
    let largeData = new Array(1000000).fill("data");

    return function () {
        console.log("Closure created");
        largeData = null; // ì°¸ì¡° ì œê±°
    };
}
```

---

## ğŸ“‚ ìš”ì•½

| íŠ¹ì§•                  | ì„¤ëª…                                                                 | ì˜ˆì œ                                      |
|-----------------------|----------------------------------------------------------------------|------------------------------------------|
| ì •ì˜                  | í•¨ìˆ˜ì™€ í•´ë‹¹ ìŠ¤ì½”í”„ ê°„ì˜ ì¡°í•©                                         | `function outer() { function inner() {} }` |
| ì£¼ìš” í™œìš©             | ë°ì´í„° ì€ë‹‰, ìƒíƒœ ìœ ì§€, ì»¤ë§                                         | `return function() {}`                   |
| ì¥ì                   | ë°ì´í„° ë³´í˜¸, ìƒíƒœ ê´€ë¦¬, ì¬ì‚¬ìš©ì„±                                     | ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬, ë°˜ë³µê¸° ë“±                  |
| ë‹¨ì                   | ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±                                                  | ë¶ˆí•„ìš”í•œ ì°¸ì¡° ì œê±° í•„ìš”                   |

---

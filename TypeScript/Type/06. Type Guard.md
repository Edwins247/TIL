# TypeScript íƒ€ì… ê°€ë“œ (Type Guards) ì •ë¦¬

**íƒ€ì… ê°€ë“œ(Type Guards)** ëŠ” TypeScriptì—ì„œ íŠ¹ì • ê°’ì˜ íƒ€ì…ì„ ì¢íˆëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì»´íŒŒì¼ëŸ¬ê°€ ì½”ë“œì˜ íŠ¹ì • ë¶€ë¶„ì—ì„œ ê°’ì˜ íƒ€ì…ì„ ë” ì •í™•íˆ ì¶”ë¡ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. íƒ€ì… ê°€ë“œëŠ” ì¡°ê±´ë¬¸ê³¼ í•¨ê»˜ ì‚¬ìš©ë˜ë©°, ìœ ë‹ˆì–¸ íƒ€ì…ì´ë‚˜ `unknown` íƒ€ì…ì„ ë‹¤ë£° ë•Œ íŠ¹íˆ ìœ ìš©í•©ë‹ˆë‹¤.

---

## ğŸ“– íƒ€ì… ê°€ë“œë€?

- **íƒ€ì… ê°€ë“œ(Type Guard)**ëŠ” ëŸ°íƒ€ì„ì— ë³€ìˆ˜ì˜ íƒ€ì…ì„ í™•ì¸í•˜ê³ , TypeScript ì»´íŒŒì¼ëŸ¬ê°€ í•´ë‹¹ ë³€ìˆ˜ì˜ íƒ€ì…ì„ ì¢í ìˆ˜ ìˆë„ë¡ ë•ëŠ” í•¨ìˆ˜ë‚˜ ì¡°ê±´ë¬¸ì…ë‹ˆë‹¤.
- ì´ë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ íŠ¹ì • íƒ€ì…ì˜ ì†ì„±ì´ë‚˜ ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“‚ íƒ€ì… ê°€ë“œì˜ ì£¼ìš” ì‚¬ìš©ë²•

### **1. `typeof`ë¥¼ ì‚¬ìš©í•œ íƒ€ì… ê°€ë“œ**

#### **ê°œë…**
- JavaScriptì˜ `typeof` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ ë°ì´í„° íƒ€ì…(`string`, `number`, `boolean`, `symbol`, `bigint`, `undefined`, `function`, `object`)ì„ í™•ì¸í•©ë‹ˆë‹¤.

#### **ì˜ˆì œ**
```typescript
function printValue(value: string | number) {
    if (typeof value === "string") {
        console.log(`String value: ${value.toUpperCase()}`);
    } else {
        console.log(`Number value: ${value.toFixed(2)}`);
    }
}

printValue("Hello"); // ì¶œë ¥: String value: HELLO
printValue(42);      // ì¶œë ¥: Number value: 42.00
```

---

### **2. `instanceof`ë¥¼ ì‚¬ìš©í•œ íƒ€ì… ê°€ë“œ**

#### **ê°œë…**
- JavaScriptì˜ `instanceof` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ê°€ íŠ¹ì • í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.

#### **ì˜ˆì œ**
```typescript
class Dog {
    bark() {
        console.log("Woof!");
    }
}

class Cat {
    meow() {
        console.log("Meow!");
    }
}

function makeSound(animal: Dog | Cat) {
    if (animal instanceof Dog) {
        animal.bark();
    } else if (animal instanceof Cat) {
        animal.meow();
    }
}

const dog = new Dog();
const cat = new Cat();

makeSound(dog); // ì¶œë ¥: Woof!
makeSound(cat); // ì¶œë ¥: Meow!
```

---

### **3. ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œ (Custom Type Guard)**

#### **ê°œë…**
- íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì—¬ íƒ€ì…ì„ ì¢í ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í•¨ìˆ˜ ë°˜í™˜ê°’ìœ¼ë¡œ **`value is Type`** êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • íƒ€ì…ì„ì„ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ì•Œë¦½ë‹ˆë‹¤.

#### **ì˜ˆì œ**
```typescript
interface Fish {
    swim(): void;
}

interface Bird {
    fly(): void;
}

function isFish(pet: Fish | Bird): pet is Fish {
    return (pet as Fish).swim !== undefined;
}

function move(pet: Fish | Bird) {
    if (isFish(pet)) {
        pet.swim(); // Fishë¡œ ì¢í˜€ì§
    } else {
        pet.fly(); // Birdë¡œ ì¢í˜€ì§
    }
}

const fish: Fish = { swim: () => console.log("Swimming...") };
const bird: Bird = { fly: () => console.log("Flying...") };

move(fish); // ì¶œë ¥: Swimming...
move(bird); // ì¶œë ¥: Flying...
```

---

### **4. `in` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•œ íƒ€ì… ê°€ë“œ**

#### **ê°œë…**
- ê°ì²´ì— íŠ¹ì • ì†ì„±ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ì—¬ íƒ€ì…ì„ ì¢í™ë‹ˆë‹¤.

#### **ì˜ˆì œ**
```typescript
interface Car {
    drive(): void;
}

interface Boat {
    sail(): void;
}

function operate(vehicle: Car | Boat) {
    if ("drive" in vehicle) {
        vehicle.drive(); // Carë¡œ ì¢í˜€ì§
    } else if ("sail" in vehicle) {
        vehicle.sail(); // Boatë¡œ ì¢í˜€ì§
    }
}

const car: Car = { drive: () => console.log("Driving...") };
const boat: Boat = { sail: () => console.log("Sailing...") };

operate(car);  // ì¶œë ¥: Driving...
operate(boat); // ì¶œë ¥: Sailing...
```

---

### **5. ìœ ë‹ˆì˜¨ íƒ€ì…ê³¼ ë°°ì—´ì— ëŒ€í•œ íƒ€ì… ê°€ë“œ**

#### **ê°œë…**
- ë°°ì—´ ìš”ì†Œì˜ íƒ€ì…ì„ í™•ì¸í•˜ê±°ë‚˜, ìœ ë‹ˆì˜¨ íƒ€ì…ì—ì„œ íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ íƒ€ì…ì„ ì¢í ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì˜ˆì œ**
```typescript
function processValues(values: (string | number)[]) {
    values.forEach((value) => {
        if (typeof value === "string") {
            console.log(`String value: ${value.toUpperCase()}`);
        } else {
            console.log(`Number value: ${value.toFixed(2)}`);
        }
    });
}

processValues(["hello", 42, "world", 3.14]);
// ì¶œë ¥:
// String value: HELLO
// Number value: 42.00
// String value: WORLD
// Number value: 3.14
```

---

## ğŸ“‚ ì£¼ìš” ì‚¬ë¡€ ë° í™œìš©

### 1. API ì‘ë‹µ ì²˜ë¦¬:
API ì‘ë‹µ ë°ì´í„°ê°€ ì—¬ëŸ¬ ê°€ì§€ í˜•íƒœë¥¼ ê°€ì§ˆ ê²½ìš°, íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
interface SuccessResponse {
    status: "success";
    data: string;
}

interface ErrorResponse {
    status: "error";
    message: string;
}

type ApiResponse = SuccessResponse | ErrorResponse;

function handleApiResponse(response: ApiResponse) {
    if (response.status === "success") {
        console.log(`Data received: ${response.data}`);
    } else if (response.status === "error") {
        console.error(`Error occurred: ${response.message}`);
    }
}

const successResponse: SuccessResponse = { status: "success", data: "User data" };
const errorResponse: ErrorResponse = { status: "error", message: "Not found" };

handleApiResponse(successResponse); // ì¶œë ¥: Data received: User data
handleApiResponse(errorResponse);   // ì¶œë ¥: Error occurred: Not found
```

---

### 2. DOM ìš”ì†Œ ì²˜ë¦¬:
DOM ìš”ì†Œê°€ ì—¬ëŸ¬ ìœ í˜•ì¼ ê²½ìš°, íƒ€ì… ê°€ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```typescript
function handleElement(element: HTMLElement | null) {
    if (element instanceof HTMLInputElement) {
        console.log(`Input value is ${element.value}`);
    } else if (element instanceof HTMLDivElement) {
        console.log(`Div content is ${element.textContent}`);
    }
}

const inputElement = document.querySelector("input");
const divElement = document.querySelector("div");

handleElement(inputElement); // Input ìš”ì†Œ ì²˜ë¦¬
handleElement(divElement);   // Div ìš”ì†Œ ì²˜ë¦¬
```

---

## ğŸ“‚ ìš”ì•½

| ë°©ë²•                     | ì„¤ëª…                                                                 | ì˜ˆì œ                                      |
|--------------------------|----------------------------------------------------------------------|------------------------------------------|
| `typeof`                 | ê¸°ë³¸ ë°ì´í„° íƒ€ì… í™•ì¸                                                | `typeof value === "string"`              |
| `instanceof`             | ê°ì²´ê°€ íŠ¹ì • í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ í™•ì¸                                | `object instanceof ClassName`            |
| ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜          | íŠ¹ì • ì¡°ê±´ìœ¼ë¡œ ì»¤ìŠ¤í…€ íƒ€ì… ê°€ë“œ ì‘ì„±                                   | `function isType(value): value is Type`  |
| `in` ì—°ì‚°ì              | ê°ì²´ì— íŠ¹ì • ì†ì„±ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸                                    | `"property" in object`                   |

---
